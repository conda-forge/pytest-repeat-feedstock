{% set name = "pytest-repeat" %}
{% set version = "0.9.3" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name.replace('-', '_') }}-{{ version }}.tar.gz
  sha256: ffd3836dfcd67bb270bec648b330e20be37d2966448c4148c4092d1e8aba8185

build:
  noarch: python
  number: 0
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  host:
    - python >=3.7
    - pip
    - hatchling
    - hatch-vcs
  run:
    - python >=3.7
    - pytest >=3.6

test:
  files:
    - test_repeat.py
  commands:
    # Make sure to fail pytest on unknown markers
    # this will ensure that pytest fails if pytest-repeat isn't registered
    - pytest -Werror test_repeat.py

about:
  home: https://github.com/pytest-dev/pytest-repeat/
  license: MPL-2.0
  license_family: MOZILLA
  license_file: LICENSE
  summary: 'pytest-repeat is a plugin for py.test that makes it easy to repeat a single test, or multiple tests, a specific number of times.'

extra:
  recipe-maintainers:
    - hmaarrfk
